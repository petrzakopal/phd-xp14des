\documentclass[a4paper, twoside, 11pt]{article}
% It is needed to use this command for automatic compilation in VSCode
% !TEX program = lualatexmk

%% DOCUMENT, PREAMBLE AND MACROS DESIGNED FOR LuaLaTeX %%
\newcommand{\fbar}{\FloatBarrier} % barier for stopping figures from leaking to other subsections, use as \fbar


\usepackage{amsmath} % math package
\usepackage{amssymb} % for miscellaneous mathematical symbols, first usage was for tick symbol in math mode \checkmark
\usepackage{textcomp} % for miscellaneous symbols
\usepackage{graphicx} % enhanced support for graphics
\usepackage{cmap} % mapování znaků - vyhledávání v pdf
% \usepackage[czech]{babel} % CZ
\usepackage[english]{babel} % EN
\usepackage[utf8]{inputenc} % kódování 
\usepackage[T1]{fontenc} % kódování 
\usepackage{multirow} % Multirow table support
\usepackage{float} % Improves the interface for defining floating objects such as figures and tables
\usepackage{wasysym} % for various glyphs, symbols

\usepackage{setspace} % spacing
\onehalfspacing

\usepackage{hyperref}
\hypersetup{
    colorlinks=true, % pokud nechci definovat citecolor=black aby byly odkazy citací černé, tak dám colorlinks=false,%
    bookmarks=true,
    linkcolor=black,
    citecolor=black,
    urlcolor=black,
}

% when using LuaLaTex, defining Times Fonts from your system - it has to be named like this and inserted ttf file in the folder of your tex file
\usepackage{fontspec}
\selectlanguage{czech}
\setmainfont[Ligatures=TeX,BoldFont={Times New Roman Bold}] {Times New Roman}
                                
\setsansfont[Ligatures=TeX,BoldFont={* Bold}]{Times New Roman}
                                      
\setmonofont{CourierPrime-Regular}
 
%\usepackage[italic]{mathastext} % for text in math environment, better looking times then



% for CITATIONS URL to work, it is not needed when you are not using URL label
\usepackage{url}
\usepackage{csquotes}
\usepackage[style=iso-numeric, backend=biber, isbn=true, urldate=iso,seconds=true, date=terse, datezeros=true, language=czech]{biblatex}
\addbibresource{src/bib/zdroje.bib} % BIB resources to import
%\DeclareUrlCommand\url{\def\UrlLeft{<}\def\UrlRight{>} \urlstyle{tt}}
%\usepackage{biblatex}
% END for citations %

% changing bibliography font
\renewcommand*{\bibfont}{\fontspec{Times New Roman}}

\usepackage{comment} % For comments
\usepackage{pdfpages} % for pdf pages
\usepackage{enumerate} % For lists
\usepackage{enumitem} % For Custom Numbering Nested Lists
\setlist[enumerate]{label*=\arabic*.} % setting Number. numbering in lists
\usepackage{tikz} % For vector graphics
\usepackage{circuitikz} % For schemes
\usepackage{pgf} % Post script graphics for tikz

% pouze funguje v PDFLaTeX%
%\usepackage{tgtermes} % na times font, jiný nefunguje s vyhledáváním a copy%

\usepackage{placeins} % for \FloatBarrier command that blocks floating with htbp! go over \FloatBarrier
\usepackage{mathrsfs} % package for math symbols for Laplace, Z transform etc., usage \mathscr{Z}
\usepackage{upgreek} % for upgreek symbols, specified tau \uptau
\usepackage{physics} % for derivations \dd
\usepackage[list=true,listformat=simple]{subcaption}
\usepackage[figurename=Fig.,font=small,labelfont=it,textfont=it]{caption} %for renaming figures instead of renewcommand, small for 11pt default is 10pt as needed in word template
\usepackage[tablename=Tab.,font=small,labelfont=it,
            textfont=it]{caption} % for renaming tables instead of renewcommand
            

%% GLOSSARIES %%
% List of abbreviations and symbols
% Original code author: Jakub Kučera

\usepackage[nonumberlist,nopostdot,section=subsection,numberedsection]{glossaries}
% section = subsection is for glossaries title to appear as a subsection, numberedsection adds the subsec number

\newglossary[slg]{symbolslist}{symbol}{ntn1}{List of symbols}
\newglossary[slg]{abbreviationslist}{abbreviation}{ntn2}{List of abbreviations}

\makeglossaries

% include files with definitions
\input{src/glossaries/abbreviations.tex}
\input{src/glossaries/symbols.tex}
\input{src/tex/tech/glossaryStyles.tex}

%% END OF GLOSSARIES %%

% this works with LuaLaTex and fontspec package %
\DeclareCaptionFont{times}{\fontspec{Times New Roman Italic}}

% labelfont and textfont defined here only works with previous declarecaptionfont times and fontspec
\captionsetup{labelfont=times, textfont=times, labelsep=space}%no separator in captions


%\bibliographystyle{czechiso} %czechiso.bst in folder is needed for this style to work, available at http://www.fit.vutbr.cz/~martinek/latex/czechiso.html%


\usepackage{chngcntr} % for numbered figures with sections
\usepackage{tocloft} % better TOC

%\usepackage{a4wide}%širší a4%
\usepackage[inner=3cm,outer=2cm,top=2.5cm,bottom=2.5cm,footskip=1cm]{geometry}%for propper margins
\usepackage{textcase} % for making text uppercase without caps \MakeTextUppercase
 
 
\usepackage{titlesec} % for spacing text after sections
\usepackage{parskip}[] % for working \parskip
\newcommand{\sectionbreak}{\clearpage} % maybe for SECTIONS on a new page

\usepackage[titletoc]{appendix} % For appendix - přílohy, titletoc is crucial
%\renewcommand{\appendixname}{Příloha}

\setlength{\parindent}{0.5cm} % setting indent of paragraph to 0.5cm
\setlength{\parskip}{0em} % setting parskip to 0 for \titleformat to work properly with parskip package

\usepackage{colortbl} % for colored cells in tables
\usepackage{xcolor} % for color definitions

%% COLOR DEFINITIONS %%
\definecolor{ctublue}{HTML}{0065BD} % defining ctu color
\definecolor{ctugreen}{HTML}{A2AD00}
\definecolor{ctured}{HTML}{C60C30}
\definecolor{ctuyellow}{HTML}{F0AB00}
\definecolor{ctugreenyblue}{HTML}{00B2A9}
\definecolor{ctulightblue}{HTML}{6AADE4}
\definecolor{ctuorange}{HTML}{E05206}
\definecolor{lightgray}{HTML}{D1D5DB}
\definecolor{codeblue}{HTML}{D9E2F3}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% defining spacing of titles
\titlespacing*{\section}{0em}{1em}{-\parskip} % spacing text after sections from titlesec package
\titlespacing*{\subsection}{0em}{1em}{-\parskip} % spacing text after sections from titlesec package
\titlespacing*{\subsubsection}{0em}{1em}{-\parskip} % spacing text after sections from titlesec package

% defining style for titles
% when you want section/sub/subsub to be black, delete \color{ctublue}
\titleformat{\section}{\color{ctublue}\fontspec{Times New Roman}\fontsize{15}{15}\bfseries}{\thesection}{2.1em}{}%defining title sizes by word template
\titleformat{\subsection}{\color{ctublue}\fontspec{Times New Roman}\fontsize{14}{14}\bfseries}{\thesubsection}{1.53em}{}%defining title sizes by word template
\titleformat{\subsubsection}{\color{ctublue}\fontspec{Times New Roman}\fontsize{13}{13}\bfseries}{\thesubsubsection}{1em}{}%defining title sizes by word template


\usepackage{ctable} % imports xtable with booktabs
\usepackage{multicol} % for multicolumn feature in tables

\usepackage{listings} % for code environments - \begin{lstlisting}

\input{src/tex/tech/lstStyles.tex}

%%change in previous commands 2.1 em , 1.53em and 1em to 1em to be easy indented not the same
\begin{document}
\fontspec{Times New Roman}

\counterwithin{figure}{section}%changing counter of figure, at each section the numbering resets
\counterwithin{table}{section}%changing counter of table, at each section the numbering resets
\counterwithin{equation}{section}%changing counter of equation, at each section the numbering resets

\counterwithin{lstlisting}{section}%counter of lstlist - codes, reseting at each section%


\renewcommand{\thefigure}{\thesection~-~\arabic{figure}}%defining style of countering
\renewcommand{\thetable}{\thesection~-~\arabic{table}}
\renewcommand{\theequation}{\thesection~-~\arabic{equation}}
\renewcommand{\thelstlisting}{\thesection~-~\arabic{lstlisting}}%delfining style for lstlisting codes, needs to be after begin document as previous renewcommand%

\renewcommand*{\cftsecdotsep}{1}  % use dots in the section entries and their step
\renewcommand*{\cftsubsecdotsep}{1}
\renewcommand*{\cftsubsubsecdotsep}{1}
\renewcommand*{\cftsecnumwidth}{4em} % increase space for Roman numerals
\renewcommand*{\cftsubsecnumwidth}{4em} %numbering width
\renewcommand*{\cftsubsubsecnumwidth}{4em} %numbering width
\renewcommand*{\cftsubsubsecindent}{0em}%no indent for subsubsection
\renewcommand*{\cftsubsecindent}{0em}%no indent for subsection
\renewcommand*{\cftsecindent}{0em}%no indent for subsection



\renewcommand*{\cftfigdotsep}{1}  % use dots in the figure entries and their step
\renewcommand*{\cftfignumwidth}{4em}
\renewcommand*{\cftfigindent}{0em}

\renewcommand*{\cfttabdotsep}{1}  % use dots in the figure entries and their step
\renewcommand*{\cfttabnumwidth}{4em}
\renewcommand*{\cfttabindent}{0em}

\renewcommand{\cftsecfont}{\fontspec{Times New Roman}\large \bfseries}
\renewcommand{\cftsubsecfont}{\fontspec{Times New Roman}}
\renewcommand{\cftsubsubsecfont}{\fontspec{Times New Roman}}

\renewcommand{\cftfigfont}{\fontspec{Times New Roman}}
\renewcommand{\cfttabfont}{\fontspec{Times New Roman}}

\renewcommand*\contentsname{\textcolor{ctublue}{\MakeTextUppercase{\fontspec{Times New Roman}Table of Contents}}}
\renewcommand{\listtablename}{{\fontspec{Times New Roman}\textcolor{ctublue}{\MakeTextUppercase{{List of tables}}}}}
\renewcommand{\listfigurename}{{\fontspec{Times New Roman}\textcolor{ctublue}{\MakeTextUppercase{{List of figures}}}}}


%% TITLE PAGE %%
\include{src/tex/tech/titlePage}

\newpage
\pagenumbering{gobble} %disabling page numbering

\newpage


%%ZADÁNÍ PRÁCE
%verze pro TISK - jen s NEW PAGE


%ONLINE VERZE - se zadáním BEZ PODPISŮ
% online verze - odkomentovat následující dva řádky
%\null\newpage
%\includepdf[]{src/docs/zadani_bez_podpisu.pdf}

%\newpage
%\cleardoublepage
\null\newpage

\pagenumbering{Roman}
\setcounter{page}{2}%%3 NUTNO řešit dle zadání etc.

%% PROHLASENI A PODEKOVANI %%
% \include{src/tex/tech/statement.tex}	


%%ABSTRAKT%%
% \include{src/tex/tech/abstract.tex}


%% TABLE OF CONTENTS %%
\tableofcontents
\newpage%
\flushbottom % vyčištění stránky
\newpage
\vspace{0pt}

%% LIST OF FIGURES %%
\listoffigures % seznam obrázků
\flushbottom % vyčištění stránky
\newpage

%% LIST OF TABLES %%
\listoftables
\flushbottom

\newpage


%% BLANK PAGE AFTER TOC, TOF, TOT %%
\pagenumbering{gobble}
\null\newpage

% settinng the page numbering to start from 1, where the main text starts
\setcounter{page}{1}
\pagenumbering{arabic}

\section{Introduction}
\gls{symbol:Pn} \gls{abbreviation:asm}

\section{Design}

\section{Control}

    \subsection{Mathematical modelling}
    \subsection{Control strategies}

\section{Comparation to others}

\section{Usage}

%% Conclusion %%
\newpage
\addcontentsline{toc}{section}{\numberline{}Conclusion} 
\section*{Conclusion}

\flushbottom % vyčištění stránky

% konec závěru

\newpage
\setmonofont{Times New Roman}

%% REFERENCES %%
\printbibliography[title={{References}}]	
\nocite{*}
\setmonofont{CourierPrime-Regular}
\addcontentsline{toc}{section}{\numberline{}References} % Adding citations to TOC %

%% APPENDIX %%
\appendix
\titleformat{\section}{\color{ctublue}\fontspec{Times New Roman}\fontsize{15}{15}\bfseries}{Appendix \thesection:}{2.1em}{}

\begin{appendices}
	\section{List of symbols and abbreviations}

		\printglossary[type=abbreviationslist, style = myStyleAbbreviations]

		\fbar
		%\newpage
		\printglossary[type=symbolslist, style =  myStyleSymbols]

	\end{appendices}
\end{document}
